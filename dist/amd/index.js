define(["exports","aurelia-metadata","aurelia-dependency-injection"],function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,n){var a=e.Metadata.getOwn("design:type",t,n);if(a){var r=t.constructor,o=e.Metadata.getOwn(c,r);if(!o){var i=e.Metadata.getOwn(e.Metadata.instanceActivator,r);if(i){if(!(i instanceof u))throw new Error("Instance activator already set. Can not use property injection.")}else e.Metadata.define(e.Metadata.instanceActivator,u.instance,r);o={},e.Metadata.define(c,o,r)}o[n]=a}}t.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();t.inject=o;var c="di:propInjectables";t.MetadataKey=c;var s,u=function(t){function o(){var e=arguments.length<=0||void 0===arguments[0]?n.Container.instance:arguments[0],r=arguments.length<=1||void 0===arguments[1]?n.ClassActivator.instance:arguments[1];a(this,o),t.call(this),this.container=e,this.classActivator=r}return r(o,t),i(o,null,[{key:"instance",get:function(){return s||(s=new o)}}]),o.prototype.invoke=function(t,n){var a=this.classActivator.invoke(t,n),r=e.Metadata.getOwn(c,t);if(r)for(var o in r)this.injectProperty(a,o,r[o]);return a},o.prototype.injectProperty=function(t,e,n){Object.defineProperty(t,e,{value:this.container.get(n)})},o}(n.ClassActivator);t.PropertyClassActivator=u});